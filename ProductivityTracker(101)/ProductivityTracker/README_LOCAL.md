# الإعداد المحلي لنظام إدارة المهندسين الاستشاريين

## الإعداد التلقائي الكامل

### خطوة واحدة فقط:
```bash
chmod +x setup-local-complete.sh
./setup-local-complete.sh
```

هذا السكريبت سيقوم بـ:
- ✅ تثبيت PostgreSQL
- ✅ إنشاء قاعدة البيانات والمستخدم
- ✅ تهيئة جميع الجداول والبيانات
- ✅ إضافة أعمدة إدارة الإقامات
- ✅ إنشاء مستخدمين للاختبار
- ✅ تكوين متغيرات البيئة

### تشغيل النظام:
```bash
./start-local.sh
```

## الميزات المتوفرة

### نظام إدارة الإقامات الكامل:
- ✅ إضافة الموظفين مع اختيار الجنسية (سعودي/مقيم)
- ✅ حقول الإقامة التلقائية للمقيمين
- ✅ تتبع تواريخ انتهاء الإقامات
- ✅ إشعارات تلقائية (3 أشهر، شهر، أسبوع، يومي)
- ✅ واجهة التجديد لمديري الموارد البشرية
- ✅ حفظ تاريخ التجديدات والإشعارات

### بيانات اختبار جاهزة:
- **المدير العام**: `admin` / `admin123`
- **مدير الموارد البشرية**: `hr_manager` / `hr123`
- **موظف مقيم**: `resident1` / `password123`
- **موظف مقيم**: `resident2` / `password123`

## استكشاف الأخطاء

### إذا فشل الاتصال بقاعدة البيانات:
```bash
sudo systemctl start postgresql
sudo systemctl status postgresql
```

### إعادة تهيئة قاعدة البيانات:
```bash
npm run db:init
```

### فحص الجداول:
```bash
PGPASSWORD=password psql -h localhost -U postgres -d consulting_engineers -c "\dt"
```

## البنية التقنية

- **قاعدة البيانات**: PostgreSQL محلي
- **الخادم**: Express.js مع TypeScript  
- **العميل**: React مع Vite
- **ORM**: Drizzle ORM
- **المنفذ**: 5000

## ملفات الإعداد المحلي

- `init-local-db.sql` - مخطط قاعدة البيانات الكامل
- `setup-local-complete.sh` - سكريبت الإعداد التلقائي
- `start-local.sh` - سكريبت التشغيل
- `.env.local` - متغيرات البيئة المحلية
- `package.local.json` - تكوين npm للبيئة المحلية

## الدعم

النظام مختبر ويعمل بالكامل في البيئة المحلية مع جميع ميزات إدارة الإقامات.